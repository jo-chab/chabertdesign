<?php    include("../_includes/session_test.inc");    include("../_includes/chabertdesign.inc");        if ($_SERVER['REQUEST_METHOD'] === 'POST') {        $project = $_POST['element'];                // Check if selected_imgs is an array        if (isset($_POST['selected_imgs']) && is_array($_POST['selected_imgs'])) {            $selectedImgs = $_POST['selected_imgs'];                        $stmtExists = $db->prepare('SELECT COUNT(*) FROM project_images WHERE project_id = ? AND image_id = ?');            $stmtInsert = $db->prepare('INSERT INTO project_images (project_id, image_id) VALUES (?, ?)');                        $db->beginTransaction();                        foreach ($selectedImgs as $img) {                // Execute the SQL statement to check if the record already exists                $stmtExists->execute([$project, $img]);                $recordCount = $stmtExists->fetchColumn();                                if ($recordCount === 0) {                    $execute = $stmtInsert->execute([$project, $img]);                                        if (!$execute) {                        print_r($stmtInsert->errorInfo());                        retour_erreur_content(22, 204, 'project', $project);                    }                }            }                        $db->commit();                        $stmtExists->closeCursor();            $stmtInsert->closeCursor();            retour_erreur_content(22, 203, 'project', $project);        } else {            retour_erreur_content(22, 8, 'project', $project);        }    }?>